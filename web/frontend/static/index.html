<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8" />
    <title>Cookmate</title>
    <style>
        body { font-family: sans-serif; margin: 0; }
        header { background: #333; color: #fff; padding: 10px 20px; display:flex; align-items:center; }
        header h1 { margin: 0; font-size: 20px; }
        nav ul { list-style:none; margin:0; padding:0; display:flex; }
        nav li { margin-right:15px; }
        nav a { color:#fff; text-decoration:none; padding:4px 8px; }
        nav a.active { background:#555; border-radius:4px; }
        section { padding:20px; display:none; }
        section.active { display:block; }
        table { border-collapse:collapse; width:100%; margin-top:20px; }
        th, td { border:1px solid #ccc; padding:4px 8px; }
    </style>
</head>
<body>
    <header>
        <h1>Cookmate</h1>
        <nav>
            <ul>
                <li><a href="#recipes" class="active">菜谱</a></li>
                <li><a href="#inventory">库存</a></li>
                <li><a href="#planner">筛选</a></li>
            </ul>
        </nav>
    </header>
    <section id="recipes" class="active">
        <h2>菜谱</h2>
        <button id="load-recipes">加载菜谱</button>
        <ul id="recipes-list"></ul>
    </section>
    <section id="inventory">
        <h2>库存</h2>
        <button id="load-inv">加载库存</button>
        <ul id="inv-list"></ul>
    </section>
    <section id="planner">
        <h2>智能筛选</h2>
        <button id="check-cookable">可做菜</button>
        <ul id="cookable-list"></ul>
    </section>

    <table id="sample-recipes">
        <thead>
            <tr>
                <th>菜谱名称</th><th>大类</th><th>烹饪方法</th><th>难度</th><th>食材</th><th>适合搭配主食（菜）</th><th>制作时间/min</th><th>教程链接</th><th>注意</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>米饭</td><td>主食</td><td>蒸</td><td>低</td><td>米</td><td></td><td>30-60</td><td></td><td></td></tr>
            <tr><td>鸡蛋饼</td><td>主食</td><td>煎</td><td>中低</td><td>鸡蛋、面</td><td></td><td>10-20</td><td></td><td></td></tr>
            <tr><td>馒头</td><td>主食</td><td>蒸</td><td>中</td><td>面、酵母</td><td></td><td>60-90</td><td><a href="https://www.bilibili.com/video/BV1CQ4y1j7or?vd_source=f51d9b7c4577669ee57e431317bfc1d7">视频</a></td><td></td></tr>
            <tr><td>花卷</td><td>主食</td><td>蒸</td><td>高</td><td>面、酵母、白糖</td><td></td><td>90-100</td><td><a href="https://www.bilibili.com/video/BV14Vx6e2E9i?vd_source=f51d9b7c4577669ee57e431317bfc1d7">视频</a></td><td></td></tr>
            <tr><td>猪肉白菜包子</td><td>主食</td><td>蒸</td><td>中高</td><td>白菜，肉馅、面</td><td></td><td>90-120</td><td><a href="https://www.bilibili.com/video/BV1S3411879i?vd_source=f51d9b7c4577669ee57e431317bfc1d7">视频</a></td><td></td></tr>
            <tr><td>猪肉白菜饺子</td><td>主食</td><td>蒸</td><td>中高</td><td>白菜、肉馅、面皮</td><td></td><td>90-120</td><td></td><td></td></tr>
            <tr><td>烙饼</td><td>主食</td><td>煎</td><td>中</td><td>面</td><td></td><td>60-80</td><td></td><td></td></tr>
            <tr><td>西红柿鸡蛋面</td><td>主食</td><td>煮</td><td>低</td><td>面条、西红柿、鸡蛋</td><td></td><td>20-30</td><td></td><td></td></tr>
            <tr><td>西红柿鸡蛋打卤面</td><td>主食</td><td>煮</td><td>中低</td><td>粗面条、西红柿、鸡蛋、豆瓣酱、甜面酱</td><td></td><td>30-40</td><td></td><td></td></tr>
            <tr><td>豆角肉打卤面</td><td>主食</td><td>煮</td><td>中低</td><td>粗面条、豆角、肉、豆瓣酱、甜面酱</td><td></td><td>30-40</td><td></td><td></td></tr>
            <tr><td>炒方便面</td><td>主食</td><td>炒</td><td>中低</td><td>洋葱、卷心菜、方便面、蒜、鸡蛋</td><td></td><td></td><td></td><td></td></tr>
            <tr><td>清汤肉丝面</td><td>主食</td><td>煮</td><td>低</td><td>面条，肉丝</td><td></td><td>10-15</td><td></td><td></td></tr>
            <tr><td>炒土豆丝</td><td>主菜</td><td>炒</td><td>中低</td><td>土豆，肉片</td><td>烙饼、米饭</td><td>10-15</td><td></td><td></td></tr>
            <tr><td>炒菜花</td><td>主菜</td><td>炒</td><td>低</td><td>菜花，肉片</td><td>米饭</td><td>0-10</td><td></td><td></td></tr>
            <tr><td>炒小瓜</td><td>主菜</td><td>炒</td><td>中低</td><td>小瓜，肉片</td><td>烙饼、米饭</td><td>0-10</td><td></td><td></td></tr>
            <tr><td>炒白菜</td><td>主菜</td><td>炒</td><td>低</td><td>白菜</td><td>米饭</td><td>10-20</td><td></td><td></td></tr>
            <tr><td>猪肉白菜炖粉条</td><td>主菜</td><td>煮</td><td>中低</td><td>猪肉，白菜，粉条，豆瓣酱，甜面酱</td><td>烙饼、馒头、米饭</td><td>40-50</td><td><a href="https://www.bilibili.com/video/BV1ty6KYBEYz?vd_source=f51d9b7c4577669ee57e431317bfc1d7">视频</a></td><td>粉条最好前一夜泡发好</td></tr>
            <tr><td>西红柿炖牛腩</td><td>主菜</td><td>煮</td><td>中低</td><td>西红柿、牛腩、香叶、洋葱</td><td>米饭、馒头</td><td>40-50</td><td><a href="https://www.bilibili.com/video/BV18i421e7wV?vd_source=f51d9b7c4577669ee57e431317bfc1d7">视频</a></td><td></td></tr>
            <tr><td>可乐鸡翅</td><td>主菜</td><td>煮</td><td>中低</td><td>鸡翅根、可乐</td><td>米饭</td><td>30-40</td><td><a href="https://www.bilibili.com/video/BV1gT421r74w?vd_source=f51d9b7c4577669ee57e431317bfc1d7">视频</a></td><td></td></tr>
            <tr><td>炸淀粉肠</td><td>副菜</td><td>炸</td><td>低</td><td>淀粉肠、烧烤酱</td><td>米饭</td><td>10-20</td><td></td><td></td></tr>
            <tr><td>炸鸡肉丸子</td><td>副菜</td><td>炸</td><td>低</td><td>鸡肉丸子、烧烤酱</td><td>米饭</td><td>10-20</td><td></td><td></td></tr>
            <tr><td>炸串</td><td>主菜、主食</td><td>炸</td><td>中</td><td>腌制酱料、鸡肉/猪肉/羊肉、烧烤蘸料</td><td>米饭、烙饼</td><td></td><td></td><td></td></tr>
        </tbody>
    </table>
    <script>
    document.querySelectorAll('nav a').forEach(a => {
        a.addEventListener('click', e => {
            e.preventDefault();
            document.querySelectorAll('nav a').forEach(n => n.classList.remove('active'));
            a.classList.add('active');
            document.querySelectorAll('section').forEach(s => s.classList.remove('active'));
            const id = a.getAttribute('href').substring(1);
            document.getElementById(id).classList.add('active');
        });
    });
    document.getElementById('load-recipes').addEventListener('click', async () => {
        const resp = await fetch('/recipes/');
        const data = await resp.json();
        document.getElementById('recipes-list').innerHTML = data.map(r => `<li>${r} <button data-r="${r}">删除</button></li>`).join('');
    });
    document.getElementById('recipes-list').addEventListener('click', async (e) => {
        if (e.target.tagName === 'BUTTON') {
            const name = e.target.getAttribute('data-r');
            const resp = await fetch(`/recipes/${name}`, {method: 'DELETE'});
            if (resp.status === 204) e.target.parentElement.remove();
        }
    });
    document.getElementById('load-inv').addEventListener('click', async () => {
        const resp = await fetch('/inventory/');
        const data = await resp.json();
        document.getElementById('inv-list').innerHTML = data.map(i => `<li>${i.ingredient}: ${i.amount} ${i.unit} <button data-i="${i.ingredient}">删除</button></li>`).join('');
    });
    document.getElementById('inv-list').addEventListener('click', async (e) => {
        if (e.target.tagName === 'BUTTON') {
            const ing = e.target.getAttribute('data-i');
            const resp = await fetch(`/inventory/${ing}`, {method: 'DELETE'});
            if (resp.status === 204) e.target.parentElement.remove();
        }
    });
    document.getElementById('check-cookable').addEventListener('click', async () => {
        const resp = await fetch('/planner/cookable');
        const data = await resp.json();
        document.getElementById('cookable-list').innerHTML = data.map(r => `<li>${r}</li>`).join('');
    });
    </script>
</body>
</html>
